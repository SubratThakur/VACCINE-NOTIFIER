(this["webpackJsonpvaccine-notifier-client"]=this["webpackJsonpvaccine-notifier-client"]||[]).push([[0],{43:function(e,t,a){e.exports=a(71)},48:function(e,t,a){},50:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),i=(a(48),a(30)),o=a(4),s=a(20),m=(a(49),a(50),function(e){var t=e.numberOfUsers;e.getAllUsers;return r.a.createElement("div",{className:"container mrgnbtm",style:{width:"100%",padding:"2%",backgroundColor:"#1c424a",color:"white",textAlign:"left"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",null,r.a.createElement("h1",null,"Vaccine Notifier"),r.a.createElement("p",null," Subscribe notification for daily updated vaccine slots !"))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h4",{style:{color:"white"}},"Total Subscribed Users"),r.a.createElement("span",{className:"number"},t))))}),u=a(15),d=function(e){var t,a,n=e.states,l=e.districts,c=e.onChageDropdown,i=e.unsubscribeUser,s=r.a.useState(!1),m=Object(o.a)(s,2),d=m[0],p=m[1],v=r.a.useState(!1),h=Object(o.a)(v,2),f=h[0],b=h[1],E=r.a.useState({email:"",phone:"",state:"",district:""}),g=Object(o.a)(E,2),N=g[0],y=g[1],w=!1,j=(null===(t=N.state)||void 0===t?void 0:t.value)||{},x=(null===(a=N.district)||void 0===a?void 0:a.value)||{},O=function(e){"email"===e.target.name?(N.email=e.target.value,y(N),d&&S()):"phone"===e.target.name&&(N.phone=e.target.value,y(N),f&&C())},S=function(){var e;N.email&&0!==(null===(e=N.email)||void 0===e?void 0:e.length)&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(N.email)?p(!1):(p(!0),w=w||!0)},C=function(){N.phone&&10===N.phone.length&&/^[6-9]\d{9}$/.test(N.phone)?b(!1):(b(!0),w=w||!0)},F=function(e){w=!1,S(),C(),w||i(N)};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 mrgnbtm"},r.a.createElement("h2",null,"Unsubscribe User!"),r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},r.a.createElement("b",null,"Email")," (Mandatory)"),r.a.createElement("input",{type:"text",onChange:function(e){return O(e)},className:d?"form-control invalid":"form-control",name:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Email"}),r.a.createElement("div",{className:d?"error":"hidden"},"Please enter valid email Id!")),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputPhone1"},r.a.createElement("b",null,"Phone")," (Mandatory)"),r.a.createElement("input",{type:"text",onChange:function(e){return O(e)},className:f?"form-control invalid":"form-control",name:"phone",id:"phone","aria-describedby":"phoneHelp",placeholder:"Phone",pattern:"[0-9]+"}),r.a.createElement("div",{className:f?"error":"hidden"},"Please enter valid phone number!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputState"},r.a.createElement("b",null,"State")," (Mandatory)"),r.a.createElement(u.a,{value:j.value,onChange:function(e){j=e.value,N.state=e,y(N),x="",c(e,"state"),console.log("Option selected:",e)},options:n}),r.a.createElement("div",null)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputDistrict"},r.a.createElement("b",null,"District "),"(Mandatory)"),r.a.createElement(u.a,{value:x.value,onChange:function(e){x=e.value,N.district=e,y(N),console.log("Option selected:",e)},options:l}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("div",{class:"info"},r.a.createElement("p",null,r.a.createElement("strong",null,"Info!")," If you have setup notification for multiple places and you just wanted to unsubscribe notification for single state/district then choose that particular state/district!")))),r.a.createElement("button",{type:"button",onClick:function(e){return F()},className:"btn btn-danger"},"Unsubscribe")))))},p=a(88),v=a(87),h=function(e){var t=e.user,a=e.onChangeForm,n=e.createUser,l=e.states,c=e.district,i=e.onChageDropdown,s=r.a.useState((function(){return["18","covishield","covaxin","free","paid"]})),m=Object(o.a)(s,2),d=m[0],h=m[1],f=r.a.useState(!1),b=Object(o.a)(f,2),E=b[0],g=b[1],N=r.a.useState(!1),y=Object(o.a)(N,2),w=y[0],j=y[1],x=r.a.useState(!1),O=Object(o.a)(x,2),S=O[0],C=O[1],F=r.a.useState(!1),I=Object(o.a)(F,2),k=I[0],P=I[1],A=!1,U=function(){return!(!t.district||!t.district.value)&&c.filter((function(e){return e.label===t.district.label})).length>0},D=function(){var e;t.email&&0!==(null===(e=t.email)||void 0===e?void 0:e.length)&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t.email)?C(!1):(C(!0),A=A||!0)},M=function(){t.phone&&10===t.phone.length&&/^[6-9]\d{9}$/.test(t.phone)?P(!1):(P(!0),A=A||!0)},T=function(e){"email"===e.target.name?S&&D():"phone"===e.target.name&&k&&M(),a(e)},_=function(){A=!1,t.state?g(!1):(g(!0),A=A||!0),U()?j(!1):(j(!0),A=A||!0),D(),M(),A||n(d)},$=t.state.value||{},z=t.district.value||{};return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 mrgnbtm"},r.a.createElement("h2",null,"Subscribe vaccine slot Notification!"),r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"First Name"),r.a.createElement("input",{type:"text",onChange:function(e){return T(e)},className:"form-control",name:"firstname",id:"firstname","aria-describedby":"emailHelp",placeholder:"First Name"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Last Name"),r.a.createElement("input",{type:"text",onChange:function(e){return T(e)},className:"form-control",name:"lastname",id:"lastname",placeholder:"Last Name"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputState"},r.a.createElement("b",null,"State")," (Mandatory)"),r.a.createElement("div",{className:E?"invalid":""},r.a.createElement(u.a,{value:$.value,onChange:function(e){g(!1),$=e.value,z="",i(e,"state"),console.log("Option selected:",e)},options:l}),r.a.createElement("div",{className:E?"error":"hidden"},"Please select valid state!")),r.a.createElement("div",null)),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputDistrict"},r.a.createElement("b",null,"District "),"(Mandatory)"),r.a.createElement("div",{className:w?"invalid":""},r.a.createElement(u.a,{value:z.value,onChange:function(e){z=e.value,j(!1),i(e,"district"),console.log("Option selected:",e)},options:c}),r.a.createElement("div",{className:w?"error":"hidden"},"Please select valid district!")))),r.a.createElement("div",{className:"row filter"},r.a.createElement(p.a,{value:d,onChange:function(e,t){h(t)},"aria-label":"text formatting"},r.a.createElement(v.a,{value:"18","aria-label":"18 plus"},r.a.createElement("b",null,"Age 18+")),r.a.createElement(v.a,{value:"45","aria-label":"45 plus"},r.a.createElement("b",null,"Age 45+")),r.a.createElement(v.a,{value:"covishield","aria-label":"45 plus"},r.a.createElement("b",null,"Covishield")),r.a.createElement(v.a,{value:"covaxin","aria-label":"45 plus"},r.a.createElement("b",null,"Covaxin")),r.a.createElement(v.a,{value:"free","aria-label":"45 plus"},r.a.createElement("b",null,"Free")),r.a.createElement(v.a,{value:"paid","aria-label":"45 plus"},r.a.createElement("b",null,"Paid"))),r.a.createElement("span",{className:"filter-span"},r.a.createElement("span",{className:"selected-filter"})," Selected",r.a.createElement("br",null),r.a.createElement("span",{className:"unselected-filter"})," Not Selected")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},r.a.createElement("b",null,"Email")," (Mandatory)"),r.a.createElement("input",{type:"text",onChange:function(e){return T(e)},className:S?"form-control invalid":"form-control",name:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Email"}),r.a.createElement("div",{className:S?"error":"hidden"},"Please enter valid email Id!")),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"exampleInputPhone1"},r.a.createElement("b",null,"Phone")," (Mandatory)"),r.a.createElement("input",{type:"text",onChange:function(e){return T(e)},className:k?"form-control invalid":"form-control",name:"phone",id:"phone","aria-describedby":"phoneHelp",placeholder:"Phone",pattern:"[0-9]+"}),r.a.createElement("div",{className:k?"error":"hidden"},"Please enter valid phone number!"))),r.a.createElement("button",{type:"button",onClick:function(e){return _()},className:"btn btn-danger"},"Subscribe")))))},f=a(8),b=a.n(f),E=a(12);function g(){return N.apply(this,arguments)}function N(){return(N=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users");case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function y(){return(y=Object(E.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(E.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=a(26),x=a.n(j);function O(){return(O=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()("https://cdn-api.co-vin.in/api/v2/admin/location/states",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(E.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e={email:"",phone:"",state:"",district:""},t=Object(n.useState)(e),a=Object(o.a)(t,2),l=a[0],c=a[1],u=Object(n.useState)([]),p=Object(o.a)(u,2),v=(p[0],p[1]),f=Object(n.useState)([]),b=Object(o.a)(f,2),E=b[0],N=b[1],j=Object(n.useState)([]),x=Object(o.a)(j,2),C=x[0],F=x[1],I=Object(n.useState)(0),k=Object(o.a)(I,2),P=k[0],A=k[1];0===E.length&&function(){return O.apply(this,arguments)}().then((function(e){var t=e.states.map((function(e){return{key:e.state_id,label:e.state_name,value:e.state_id}}));console.log(t),N(t)}));var U=function(e){(function(e){return S.apply(this,arguments)})(e).then((function(e){var t=e.districts.map((function(e){return{key:e.district_id,label:e.district_name,value:e.district_id}}));console.log(t),F(t)}))},D=function(e,t){var a;"state"===t?(null===(a=l.state)||void 0===a?void 0:a.value)!==e.value&&(l.state=e,U(e.value)):l.district=e};return Object(n.useEffect)((function(){g().then((function(e){console.log(e),v(e),A(e.length)}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(m,{numberOfUsers:P,getAllUsers:function(){g().then((function(e){console.log(e),v(e),A(e.length)}))}}),r.a.createElement("div",{className:"container mrgnbtm"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement(s.a,{defaultActiveKey:"subscribe",id:"main-sub-unsub-container"},r.a.createElement(s.a,{eventKey:"subscribe",title:"Subscribe Notification"},r.a.createElement("div",{className:"childContainer"},r.a.createElement(h,{user:l,onChangeForm:function(e){"firstname"===e.target.name?l.firstName=e.target.value:"lastname"===e.target.name?l.lastName=e.target.value:"email"===e.target.name?l.email=e.target.value:"phone"===e.target.name&&(l.phone=e.target.value),c(l)},createUser:function(e){var t={age:[18,45],vaccine:["covishield","covaxin"],type:["free","paid"]},a={age:[],vaccine:[],type:[]};0===e.length?(Object(i.a)("userFilter"),a=t):e.forEach((function(e){!isNaN(e)&&t.age.includes(parseInt(e))?a.age.push(e):t.vaccine.includes(e)?a.vaccine.push(e):t.type.includes(e)&&a.type.push(e)})),l.filter=a,function(e){return y.apply(this,arguments)}(l).then((function(e){console.log(e),A(P+1)}))},states:E,district:C,onChageDropdown:D}))),r.a.createElement(s.a,{eventKey:"unsubscribe",title:"Unsubscribe Notification"},r.a.createElement("div",{className:"childContainer"},r.a.createElement("p",null,"If you don't want get notified for available slots , you can simple stop your notifications!"),r.a.createElement(d,{states:E,districts:C,onChageDropdown:D,unsubscribeUser:function(t){(function(e){return w.apply(this,arguments)})(t).then((function(t){console.log(t),c(e),A(P-t)}))}}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(35),I=a(36),k=a(38),P=a(37),A=function(){return r.a.createElement("h1",null,"Something went wrong")},U=function(e){Object(k.a)(a,e);var t=Object(P.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e.componentDidCatch=function(t,a){e.setState({error:t,info:a})},e}return Object(I.a)(a,[{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?r.a.createElement(A,null):t}}]),a}(r.a.Component);U.getDerivedStateFromError=function(e){return{hasError:!0}},c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null,r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.6bd074b1.chunk.js.map